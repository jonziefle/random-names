var RandomNameGenerator = (function () {
    var letterDistributions = {
        "letters": ["a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z", "à", "â", "á", "å", "ä", "ã", "ą", "æ", "œ", "ç", "ĉ", "ć", "č", "ď", "ð", "è", "é", "ê", "ë", "ę", "ě", "ĝ", "ğ", "ĥ", "î", "ì", "í", "ï", "ı", "ĵ", "ł", "ñ", "ń", "ň", "ò", "ö", "ô", "ó", "õ", "ø", "ř", "ŝ", "ş", "ś", "š", "ß", "ť", "þ", "ù", "ú", "û", "ŭ", "ü", "ů", "ý", "ź", "ż", "ž"],
        "letterFrequency": {
            "english": [8.167, 1.492, 2.782, 4.253, 12.702, 2.228, 2.015, 6.094, 6.966, 0.153, 0.772, 4.025, 2.406, 6.749, 7.507, 1.929, 0.095, 5.987, 6.327, 9.056, 2.758, 0.978, 2.36, 0.15, 1.974, 0.074, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "french": [7.636, 0.901, 3.26, 3.669, 14.715, 1.066, 0.866, 0.737, 7.529, 0.613, 0.049, 5.456, 2.968, 7.095, 5.796, 2.521, 1.362, 6.693, 7.948, 7.244, 6.311, 1.838, 0.074, 0.427, 0.128, 0.326, 0.486, 0.051, 0, 0, 0, 0, 0, 0, 0.018, 0.085, 0, 0, 0, 0, 0, 0.271, 1.504, 0.218, 0.008, 0, 0, 0, 0, 0, 0.045, 0, 0, 0.005, 0, 0, 0, 0, 0, 0, 0, 0, 0.023, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.058, 0, 0.06, 0, 0, 0, 0, 0, 0, 0],
            "german": [6.516, 1.886, 2.732, 5.076, 16.396, 1.656, 3.009, 4.577, 6.55, 0.268, 1.417, 3.437, 2.534, 9.776, 2.594, 0.67, 0.018, 7.003, 7.27, 6.154, 4.166, 0.846, 1.921, 0.034, 0.039, 1.134, 0, 0, 0, 0, 0.578, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.443, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.307, 0, 0, 0, 0, 0, 0, 0.995, 0, 0, 0, 0, 0],
            "spanish": [11.525, 2.215, 4.019, 5.01, 12.181, 0.692, 1.768, 0.703, 6.247, 0.493, 0.011, 4.967, 3.157, 6.712, 8.683, 2.51, 0.877, 6.871, 7.977, 4.632, 2.927, 1.138, 0.017, 0.215, 1.008, 0.467, 0, 0, 0.502, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.433, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.725, 0, 0, 0, 0, 0.311, 0, 0, 0, 0, 0, 0.827, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.168, 0, 0, 0.012, 0, 0, 0, 0, 0],
            "portuguese": [14.634, 1.043, 3.882, 4.992, 12.57, 1.023, 1.303, 0.781, 6.186, 0.397, 0.015, 2.779, 4.738, 4.446, 9.735, 2.523, 1.204, 6.53, 6.805, 4.336, 3.639, 1.575, 0.037, 0.253, 0.006, 0.47, 0.072, 0.562, 0.118, 0, 0, 0.733, 0, 0, 0, 0.53, 0, 0, 0, 0, 0, 0, 0.337, 0.45, 0, 0, 0, 0, 0, 0, 0, 0, 0.132, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.635, 0.296, 0.04, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.207, 0, 0, 0.026, 0, 0, 0, 0, 0],
            "esperanto": [12.117, 0.98, 0.776, 3.044, 8.995, 1.037, 1.171, 0.384, 10.012, 3.501, 4.163, 6.104, 2.994, 7.955, 8.779, 2.755, 0, 5.914, 6.092, 5.276, 3.183, 1.904, 0, 0, 0, 0.494, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.657, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.691, 0, 0.022, 0, 0, 0, 0, 0, 0.055, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.385, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.52, 0, 0, 0, 0, 0, 0],
            "italian": [11.745, 0.927, 4.501, 3.736, 11.792, 1.153, 1.644, 0.636, 10.143, 0.011, 0.009, 6.51, 2.512, 6.883, 9.832, 3.056, 0.505, 6.367, 4.981, 5.623, 3.011, 2.097, 0.033, 0.003, 0.02, 1.181, 0.635, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.263, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.03, 0, 0, 0, 0, 0, 0, 0, 0, 0.002, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.166, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "swedish": [9.383, 1.535, 1.486, 4.702, 10.149, 2.027, 2.862, 2.09, 5.817, 0.614, 3.14, 5.275, 3.471, 8.542, 4.482, 1.839, 0.02, 8.431, 6.59, 7.691, 1.919, 2.415, 0.142, 0.159, 0.708, 0.07, 0, 0, 0, 1.338, 1.797, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1.305, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "polish": [10.503, 1.74, 3.895, 3.725, 7.352, 0.143, 1.731, 1.015, 8.328, 1.836, 2.753, 2.564, 2.515, 6.237, 6.667, 2.445, 0, 5.243, 5.224, 2.475, 2.062, 0.012, 5.813, 0.004, 3.206, 4.852, 0, 0, 0, 0, 0, 0, 0.699, 0, 0, 0, 0, 0.743, 0, 0, 0, 0, 0, 0, 0, 1.035, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2.109, 0, 0.362, 0, 0, 0, 0, 1.141, 0, 0, 0, 0, 0, 0.814, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.078, 0.706, 0],
            "dutch": [7.486, 1.584, 1.242, 5.933, 18.91, 0.805, 3.403, 2.38, 6.499, 1.46, 2.248, 3.568, 2.213, 10.032, 6.063, 1.57, 0.009, 6.411, 3.73, 6.79, 1.99, 2.85, 1.52, 0.036, 0.035, 1.39, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "danish": [6.025, 2, 0.565, 5.858, 15.453, 2.406, 4.077, 1.621, 6, 0.73, 3.395, 5.229, 3.237, 7.24, 4.636, 1.756, 0.007, 8.956, 5.805, 6.862, 1.979, 2.332, 0.069, 0.028, 0.698, 0.034, 0, 0, 0, 1.19, 0, 0, 0, 0.872, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.939, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "icelandic": [10.11, 1.043, 0, 1.575, 6.418, 3.013, 4.241, 1.871, 7.578, 1.144, 3.314, 4.532, 4.041, 7.711, 2.166, 0.789, 0, 8.581, 5.63, 4.953, 4.562, 2.437, 0, 0.046, 0.9, 0, 0, 0, 1.799, 0, 0, 0, 0, 0.867, 0, 0, 0, 0, 0, 0, 4.393, 0, 0.647, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1.57, 0, 0, 0, 0, 0, 0, 0, 0, 0.777, 0, 0.994, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1.455, 0, 0.613, 0, 0, 0, 0, 0.228, 0, 0, 0],
            "finnish": [12.217, 0.281, 0.281, 1.043, 7.968, 0.194, 0.392, 1.851, 10.817, 2.042, 4.973, 5.761, 3.202, 8.826, 5.614, 1.842, 0.013, 2.872, 7.862, 8.75, 5.008, 2.25, 0.094, 0.031, 1.745, 0.051, 0, 0, 0, 0.003, 3.577, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.444, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
        },
        "letterCumulative": {}
    };

    // capitalize the first letter of a string
    function capitalizeLetter(string) {
        return string.charAt(0).toUpperCase() + string.slice(1);
    }

    // populate the select languages
    function populateLanguageSelect() {
        var selectHTML = "";
        $.each(letterDistributions["letterFrequency"], function (language, frequencyArray) {
            selectHTML += "<option value='" + language + "'>" + capitalizeLetter(language) + "</option>";
        });
        $(".selector").append(selectHTML);
    }

    // generates cumulative distributions from the individual letter frequencies
    function generateCumulativeDistributions() {
        $.each(letterDistributions["letterFrequency"], function (language, frequencyArray) {
            var cumulativeArray = [];
            var sum = 0;
            frequencyArray.forEach(function (frequency) {
                sum += parseInt(frequency * 1000);
                cumulativeArray.push(sum);
            });
            letterDistributions["letterCumulative"][language] = cumulativeArray;
        });
    }

    // generate names
    function generateName(language) {
        var letters = letterDistributions["letters"];
        var frequency = letterDistributions["letterFrequency"][language];
        var cumulative = letterDistributions["letterCumulative"][language];

        var letterMin = 3, letterMax = 10;
        var letterNum = Math.floor(Math.random() * (letterMax - letterMin)) + letterMin;
        var randomMax = cumulative[cumulative.length - 1];

        var name = "";
        for (var i = 0; i < letterNum; i++) {
            var randomLetter = Math.floor(Math.random() * randomMax);
            for (var j = 0; j < letters.length; j++) {
                if (frequency[j] > 0 && randomLetter < cumulative[j]) {
                    name += letters[j];
                    break;
                }
            }
        }

        $("#Name").html(capitalizeLetter(name));
    }

    return {
        init: function () {
            populateLanguageSelect();
            generateCumulativeDistributions();

            $("#NameButton").on("click", function () {
                var language = $(".selector").val();
                if (letterDistributions["letterFrequency"].hasOwnProperty(language)) {
                    generateName(language);
                } else {
                    $("#Name").html("Please select a language!");
                }

            });
        }
    }
})();
RandomNameGenerator.init();
